<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Professional Spin Wheel â€” Ecommerce Promo</title>
  <meta name="description"
    content="Responsive, accessible spin wheel for ecommerce promotions â€” vanilla HTML/CSS/JS. Weighted prizes, server-safe hooks, confetti, analytics." />
  <style>
    :root {
      --bg: #0f1724;
      /* dark navy */
      --card: #0b1220;
      --muted: #94a3b8;
      --accent: #06b6d4;
      /* cyan */
      --glass: rgba(255, 255, 255, 0.04);
      --size: 420px;
      --pointer-size: 36px;
      --font-sans: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: var(--font-sans);
      background: linear-gradient(180deg, var(--bg), #071020 120%);
      color: #e6eef8;
      -webkit-font-smoothing: antialiased;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px;
    }

    .panel {
      width: 100%;
      max-width: 960px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(2, 6, 23, 0.7);
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 28px;
      align-items: center;
    }

    /* Right: wheel area */
    .wheel-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px
    }

    .wheel-stage {
      position: relative;
      width: var(--size);
      height: calc(var(--size) + 36px)
    }

    /* pointer */
    .pointer {
      position: absolute;
      top: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: var(--pointer-size) solid transparent;
      border-right: var(--pointer-size) solid transparent;
      border-top: calc(var(--pointer-size) * 0.9) solid #0b1220;
      z-index: 40;
      filter: drop-shadow(0 6px 8px rgba(2, 6, 23, 0.8));
    }

    /* Wheel */
    .wheel {
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      overflow: visible;
      background: linear-gradient(180deg, #0b1220, #071022);
      display: grid;
      place-items: center;
      box-shadow: inset 0 -6px 20px rgba(0, 0, 0, 0.6), 0 12px 30px rgba(2, 6, 23, 0.7);
      transition: transform 5s cubic-bezier(.22, 1, .36, 1);
      will-change: transform;
    }

    .wheel svg {
      display: block
    }


    .wheel svg text {
      font-weight: 800;
      fill: #071325;
      font-family: var(--font-sans);
      transform-box: fill-box;
      transform-origin: center;
      transform: rotate(calc(-1 * var(--wheel-rotation, 0deg)));
    }

    .center-button {
      position: absolute;
      width: 92px;
      height: 92px;
      border-radius: 50%;
      background: linear-gradient(180deg, #0f1724, #071022);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 30;
      box-shadow: 0 6px 18px rgba(2, 6, 23, 0.6);
      border: 4px solid rgba(255, 255, 255, 0.04);
      cursor: pointer;
      user-select: none;
      font-weight: 900;
      font-size: 16px
    }

    .center-button:focus {
      outline: 3px solid rgba(6, 182, 212, 0.14)
    }

    /* labels on slices */
    svg text {
      font-weight: 800;
      fill: #071325;
      font-family: var(--font-sans)
    }

    /* result banner */
    .result {
      margin-top: 8px;
      padding: 10px 14px;
      border-radius: 10px;
      background: linear-gradient(90deg, rgba(6, 182, 212, 0.08), rgba(96, 165, 250, 0.03));
      color: #e6f8fb;
      font-weight: 700
    }

    /* confetti */
    .confetti {
      pointer-events: none;
      position: absolute;
      inset: 0;
      z-index: 60;
      overflow: hidden
    }

    .confetti .piece {
      position: absolute;
      width: 10px;
      height: 16px;
      opacity: 0;
      will-change: transform, opacity
    }

    /* responsive */
    @media (max-width:880px) {
      .panel {
        grid-template-columns: 1fr;
        padding: 18px
      }

      .wheel-wrap {
        order: -1;
        margin-bottom: 10px
      }

      .wheel-stage {
        margin: 0 auto
      }
    }
  </style>
</head>

<body>
  <div class="panel" role="application" aria-label="Promotional Spin Wheel">

    <div class="wheel-wrap">
      <div class="wheel-stage">
        <div class="pointer" aria-hidden></div>

        <!-- Pre-rendered SVG: all slices and labels are in the HTML so nothing is injected later -->
        <div id="wheel" class="wheel" role="img" aria-label="Prize wheel">
          <svg width="420" height="420" viewBox="0 0 420 420" xmlns="http://www.w3.org/2000/svg" aria-hidden="false">
            <g>
              <!-- Paths calculated for 6 equal slices -->
              <path d="M 210.0 210.0 L 390.1333 106.0000 A 208.0 208.0 0 0 0 210.0000 2.0000 Z" fill="#F97316"
                stroke="#0b1220" stroke-width="1" />
              <path d="M 210.0 210.0 L 390.1333 314.0000 A 208.0 208.0 0 0 0 390.1333 106.0000 Z" fill="#60A5FA"
                stroke="#0b1220" stroke-width="1" />
              <path d="M 210.0 210.0 L 210.0000 418.0000 A 208.0 208.0 0 0 0 390.1333 314.0000 Z" fill="#34D399"
                stroke="#0b1220" stroke-width="1" />
              <path d="M 210.0 210.0 L 29.8667 314.0000 A 208.0 208.0 0 0 0 210.0000 418.0000 Z" fill="#06B6D4"
                stroke="#0b1220" stroke-width="1" />
              <path d="M 210.0 210.0 L 29.8667 106.0000 A 208.0 208.0 0 0 0 29.8667 314.0000 Z" fill="#E5E7EB"
                stroke="#0b1220" stroke-width="1" />
              <path d="M 210.0 210.0 L 210.0000 2.0000 A 208.0 208.0 0 0 0 29.8667 106.0000 Z" fill="#F43F5E"
                stroke="#0b1220" stroke-width="1" />

              <!-- Labels positioned and rotated so they are readable on each slice -->
              <text x="274.48" y="98.3174" transform="rotate(210 274.48 98.3174)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">10% OFF</text>
              <text x="338.96" y="210" transform="rotate(270 338.96 210)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">20% OFF</text>
              <text x="274.48" y="321.6826" transform="rotate(330 274.48 321.6826)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">Free Mug</text>
              <text x="145.52" y="321.6826" transform="rotate(30 145.52 321.6826)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">Free Shipping</text>
              <text x="81.04" y="210" transform="rotate(90 81.04 210)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">No Prize</text>
              <text x="145.52" y="98.3174" transform="rotate(150 145.52 98.3174)" font-size="12" text-anchor="middle"
                dominant-baseline="middle">50% OFF</text>

              <!-- center circle and label -->
              <circle cx="210" cy="210" r="75" fill="#071325" />
              <text x="210" y="214" text-anchor="middle" font-size="14" fill="#fff" style="font-weight:900">SPIN</text>
            </g>
          </svg>
        </div>

        <div id="centerBtn" class="center-button" tabindex="0" role="button" aria-pressed="false"
          aria-label="Spin the wheel">SPIN</div>

        <div id="confetti" class="confetti" aria-hidden="true"></div>
      </div>

      <div id="resultBox" class="result" aria-live="polite" style="display:none;">Congratulations!</div>
    </div>
  </div>

  <script>
    (function () {
      const CONFIG = {
        size: 420,
        segments: [{
            label: '10% OFF',
            color: '#F97316',
            weight: 1
          },
          {
            label: '20% OFF',
            color: '#60A5FA',
            weight: 1
          },
          {
            label: 'Free Mug',
            color: '#34D399',
            weight: 1
          },
          {
            label: 'Free Shipping',
            color: '#06B6D4',
            weight: 1
          },
          {
            label: 'No Prize',
            color: '#E5E7EB',
            weight: 20
          },
          {
            label: '50% OFF',
            color: '#F43F5E',
            weight: 1
          },
        ],
        fullSpins: 5,
      };

      const wheel = document.getElementById("wheel");
      const resultBox = document.getElementById("resultBox");
      const centerBtn = document.getElementById("centerBtn");
      const confettiEl = document.getElementById("confetti");

      let spinning = false;
      let lastIndex = -1;

      function weightedRandomIndex(segments, lastIdx) {
        const weighted = [];
        segments.forEach((seg, i) => {
          let w = seg.weight;
          if (i === lastIdx) w = 0.2;
          for (let j = 0; j < w * 10; j++) weighted.push(i);
        });
        return weighted[Math.floor(Math.random() * weighted.length)];
      }

      function spin() {
        if (spinning) return;
        spinning = true;
        resultBox.style.display = "none";

        const index = weightedRandomIndex(CONFIG.segments, lastIndex);
        lastIndex = index;

        const anglePer = 360 / CONFIG.segments.length;
        const target = index * anglePer + anglePer / 2;
        const finalRotation = 360 * CONFIG.fullSpins + (360 - target);

        wheel.style.transition = "transform 5s cubic-bezier(.22,1,.36,1)";
        wheel.style.transform = `rotate(${finalRotation}deg)`;
        wheel.style.setProperty('--wheel-rotation', `${finalRotation}deg`);


        wheel.addEventListener("transitionend", function handler() {
          wheel.removeEventListener("transitionend", handler);
          spinning = false;

          const seg = CONFIG.segments[index];
          resultBox.textContent =
            seg.label === "No Prize" ?
            "No prize this time â€” try again!" :
            `ðŸŽ‰ You won: ${seg.label}!`;

          resultBox.style.display = "block";

          wheel.style.transition = "none";
          wheel.style.transform = `rotate(${360 - target}deg)`;

          if (seg.label !== "No Prize") fireConfetti();
        });
      }

      function fireConfetti() {
        confettiEl.innerHTML = '';
        const colors = CONFIG.segments.map(s => s.color);
        const count = 28;

        for (let i = 0; i < count; i++) {
          const el = document.createElement('div');
          el.className = 'piece';
          el.style.left = Math.random() * 100 + '%';
          el.style.top = (10 + Math.random() * 40) + '%';
          el.style.background = colors[Math.floor(Math.random() * colors.length)];
          el.style.opacity = '1';
          el.style.width = (8 + Math.random() * 8) + 'px';
          el.style.height = (10 + Math.random() * 12) + 'px';
          el.style.borderRadius = Math.random() > 0.5 ? '2px' : '50%';

          const startRotate = Math.random() * 360;
          el.style.transform = `translateY(0) rotate(${startRotate}deg)`;
          confettiEl.appendChild(el);

          const fall = 700 + Math.random() * 900;
          const endRotate = startRotate + 360 + Math.random() * 360;

          el.animate(
            [{
                transform: `translateY(0) rotate(${startRotate}deg)`,
                opacity: 1
              },
              {
                transform: `translateY(${200 + Math.random() * 400}px) rotate(${endRotate}deg)`,
                opacity: 0
              }
            ], {
              duration: fall,
              easing: 'cubic-bezier(.2,.9,.3,1)',
              delay: Math.random() * 200
            }
          );

          setTimeout(() => {
            try {
              el.remove();
            } catch {}
          }, fall + 600);
        }
      }

      centerBtn.addEventListener("click", spin);
      centerBtn.addEventListener("keydown", e => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          spin();
        }
      });
    })();
  </script>

</body>

</html>