<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Seamless Infinite Ad Slider</title>
    <style>
        :root {
            --w: min(100%, 980px);
            --h: clamp(160px, 34vw, 360px);
            --gap: 12px;
            --radius: 16px;
            --shadow: 0 10px 30px rgba(0, 0, 0, .12);
            --dot-size: 10px;
            --accent: #ff6a00;
            --bg: #0f1115;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 32px;
            display: grid;
            place-items: center;
            min-height: 100svh;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
            background: radial-gradient(1200px 800px at 10% 10%, #151823, #0b0d12 70%), #0b0d12;
            color: #e7ebf3;
        }

        .slider {
            width: var(--w);
            position: relative;
            user-select: none;
        }

        .slider .viewport {
            overflow: hidden;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            height: var(--h);
            background: #0a0c10;
        }

        .slider .track {
            display: flex;
            height: 100%;
            will-change: transform;
            transition: transform .6s cubic-bezier(.22, .61, .36, 1);
        }

        .slider .slide {
            position: relative;
            flex: 0 0 100%;
            height: 100%;
            display: grid;
            place-items: center;
            overflow: hidden;
            background: #0b0e15;
        }

        .slider .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* Gradient edges for a nice app-like feel */
        .slider .viewport::before,
        .slider .viewport::after {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            mask: linear-gradient(90deg, black, black calc(100% - 40px), transparent);
        }

        .slider .viewport::after {
            mask: linear-gradient(270deg, black, black calc(100% - 40px), transparent);
        }

        /* Controls */
        .slider .ctrl {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 8px;
            pointer-events: none;
        }

        .slider .btn {
            pointer-events: auto;
            border: 0;
            width: 44px;
            height: 44px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            cursor: pointer;
            background: rgba(255, 255, 255, .08);
            backdrop-filter: blur(6px);
            color: #fff;
            transition: transform .15s ease, background .2s ease;
            outline: none;
        }

        .slider .btn:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, .14);
        }

        .slider .btn:active {
            transform: scale(.97);
        }

        .slider .btn svg {
            width: 22px;
            height: 22px;
        }

        /* Dots */
        .slider .dots {
            position: absolute;
            left: 50%;
            bottom: 10px;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(8, 10, 14, .55);
            backdrop-filter: blur(6px);
        }

        .slider .dot {
            width: var(--dot-size);
            height: var(--dot-size);
            border-radius: 999px;
            border: 2px solid rgba(255, 255, 255, .5);
            background: transparent;
            display: inline-block;
            cursor: pointer;
            padding: 0;
            margin: 0;
            outline: none;
        }

        .slider .dot[aria-current="true"] {
            background: var(--accent);
            border-color: var(--accent);
        }

        /* Caption example overlay (optional) */
        .slider .caption {
            position: absolute;
            bottom: 16px;
            left: 16px;
            padding: 8px 12px;
            border-radius: 10px;
            background: rgba(0, 0, 0, .45);
            color: #fff;
            font-weight: 600;
            letter-spacing: .2px;
            backdrop-filter: blur(4px);
        }

        @media (max-width: 640px) {
            .slider .btn {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>

<body>
    <div class="slider" aria-roledescription="carousel" aria-label="Promoted Ads">
        <div class="viewport" id="viewport">
            <div class="track" id="track" role="list">
                <!-- Slides (you can dynamically generate these) -->
                <div class="slide" role="listitem" data-ad-id="1">
                    <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=1600"
                        alt="Smartwatch summer sale" />
                    <div class="caption">Smartwatch Summer Sale</div>
                </div>
                <div class="slide" role="listitem" data-ad-id="2">
                    <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600"
                        alt="Sneakers new arrivals" />
                    <div class="caption">Sneakers â€“ New Arrivals</div>
                </div>
                <div class="slide" role="listitem" data-ad-id="3">
                    <img src="https://images.unsplash.com/photo-1526178614028-9c324a4f4d14?q=80&w=1600"
                        alt="Headphones mega deal" />
                    <div class="caption">Headphones Mega Deal</div>
                </div>
                <div class="slide" role="listitem" data-ad-id="4">
                    <img src="https://images.unsplash.com/photo-1518544801976-3e188ea7f76e?q=80&w=1600"
                        alt="Home decor collection" />
                    <div class="caption">Home Decor Collection</div>
                </div>
            </div>
            <div class="ctrl" aria-hidden="false">
                <button class="btn prev" aria-label="Previous slide">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6" /></svg>
                </button>
                <button class="btn next" aria-label="Next slide">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6" /></svg>
                </button>
            </div>
            <div class="dots" aria-label="Slide indicators" id="dots"></div>
        </div>
    </div>

    <script>
        // --- Config ---
        const AUTOPLAY_MS = 3500; // time between slides
        const TRANSITION_MS = 600; // MUST match CSS .track transition duration
        const PAUSE_ON_HOVER = true;
        const PAUSE_ON_FOCUS = true;

        // --- Elements ---
        const viewport = document.getElementById('viewport');
        const track = document.getElementById('track');
        const slides = Array.from(track.children);
        const prevBtn = document.querySelector('.prev');
        const nextBtn = document.querySelector('.next');
        const dotsWrap = document.getElementById('dots');

        // --- State ---
        let slideIndex = 1; // start at first real slide AFTER we add clones
        let width = () => viewport.clientWidth;
        let autoplayTimer = null;
        let isAnimating = false;

        // --- Clone edges for seamless loop ---
        const firstClone = slides[0].cloneNode(true);
        const lastClone = slides[slides.length - 1].cloneNode(true);
        firstClone.setAttribute('data-clone', 'first');
        lastClone.setAttribute('data-clone', 'last');
        track.appendChild(firstClone);
        track.insertBefore(lastClone, slides[0]);

        // Update slides NodeList after cloning
        const allSlides = Array.from(track.children);

        // Set initial offset to the first real slide
        function setOffset(index, withTransition = true) {
            if (!withTransition) track.style.transition = 'none';
            const x = -index * width();
            track.style.transform = `translate3d(${x}px,0,0)`;
            if (!withTransition) {
                // Force reflow then restore transition for next moves
                track.getBoundingClientRect();
                track.style.transition = '';
            }
        }

        // Build dots for real slides only
        const realCount = allSlides.length - 2;
        const dots = Array.from({
            length: realCount
        }, (_, i) => {
            const b = document.createElement('button');
            b.className = 'dot';
            b.setAttribute('aria-label', `Go to slide ${i + 1}`);
            b.addEventListener('click', () => goTo(i + 1));
            dotsWrap.appendChild(b);
            return b;
        });

        function updateDots() {
            const realIndex = normalize(slideIndex) - 1; // 0..realCount-1
            dots.forEach((d, i) => d.setAttribute('aria-current', i === realIndex ? 'true' : 'false'));
        }

        function normalize(i) {
            // Converts any slideIndex to a real slide number 1..realCount
            if (i <= 0) return realCount; // if at lastClone position, normalize to last real
            if (i > realCount) return 1; // if at firstClone position, normalize to first real
            return i;
        }

        function next() {
            moveTo(slideIndex + 1);
        }

        function prev() {
            moveTo(slideIndex - 1);
        }

        function moveTo(targetIndex) {
            if (isAnimating) return;
            isAnimating = true;
            slideIndex = targetIndex;
            setOffset(slideIndex, true);
            // After transition, if we are on a clone, jump to the mirrored real slide without animation
            if (slideIndex === 0) { // we are on lastClone visually
                slideIndex = realCount; // jump to last real
                setOffset(slideIndex, false);
            } else if (slideIndex === realCount + 1) { // we are on firstClone visually
                slideIndex = 1; // jump to first real
                setOffset(slideIndex, false);
            }
            updateDots();
            isAnimating = false;
        }

        function goTo(realIndex1Based) {
            if (isAnimating) return;
            slideIndex = realIndex1Based;
            moveTo(slideIndex);
        }

        function startAutoplay() {
            stopAutoplay();
            autoplayTimer = window.setInterval(() => {
                next();
            }, AUTOPLAY_MS);
        }

        function stopAutoplay() {
            if (autoplayTimer) window.clearInterval(autoplayTimer);
            autoplayTimer = null;
        }

        // Pause on hover/focus/visibility change
        if (PAUSE_ON_HOVER) {
            viewport.addEventListener('mouseenter', stopAutoplay);
            viewport.addEventListener('mouseleave', startAutoplay);
        }
        if (PAUSE_ON_FOCUS) {
            viewport.addEventListener('focusin', stopAutoplay);
            viewport.addEventListener('focusout', startAutoplay);
        }
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) stopAutoplay();
            else startAutoplay();
        });

        // Resize handling to keep slides aligned
        window.addEventListener('resize', () => setOffset(slideIndex, false));

        // Keyboard support
        viewport.tabIndex = 0; // make focusable
        viewport.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') next();
            if (e.key === 'ArrowLeft') prev();
        });

        // Buttons
        prevBtn.addEventListener('click', prev);
        nextBtn.addEventListener('click', next);

        // INIT
        setOffset(slideIndex, false);
        updateDots();
        startAutoplay();

        // Example: dynamically replace slides with API data
        // You can fetch ad images/links and rebuild the track, then re-run init logic.
    </script>
</body>

</html>