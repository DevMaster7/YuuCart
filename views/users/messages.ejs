<!doctype html>
<html lang="en">

<head data-page="Messages">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/common/loader.css">
    <link rel="stylesheet" href="/css/users/messages.css">
    <link rel="stylesheet" href="/css/users/user-sidebar.css">
    <link rel="stylesheet" href="/css/common/user-admin-nav.css">
    <link rel="stylesheet" href="/css/common/logout.css">
    <link rel="stylesheet" href="/css/common/footer.css">
    <title>Messages - YuuCart</title>
</head>

<body>
    <div class="main-container">
        <div class="side-nav-con"></div>
        <div class="content" aria-label="Messages list">
            <div class="page-head">
                <div>
                    <div class="page-title">Messages</div>
                    <div class="page-sub">Stay connected with us and get updates about your orders or offers</div>
                </div>
            </div>

            <div class="list-box" role="list" aria-label="Messages" id="listBox">
                <div class="messages">
                    <% user.messages.reverse().forEach(msg => { %>
                    <article class="msg <%= msg.seen ? " active" : "" %> " data-id="<%= msg._id %>" role="listitem"
                        data-id="1" aria-label="<%= msg.from %>">
                        <div class="msg-body">
                            <div class="row">
                                <div style="display:flex;align-items:center;gap:12px">
                                    <img class="avatar" src="<%= msg.fromImg %>" alt="">
                                    <div>
                                        <div class="name"><%= msg.from%></div>
                                        <div class="time">
                                            <%= new Date(msg.sendingDate).toLocaleString("en-GB", {day: "2-digit", month: "2-digit", year: "numeric", hour: "2-digit", minute: "2-digit", second: "2-digit", hour12: true}) %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text" id="textContent">
                                <%- msg.textContent %><br>
                            </div>
                        </div>
                    </article>
                    <% }) %>
                </div>
                <div class="empty" aria-hidden="true">No messages</div>
            </div>
        </div>
    </div>

    <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document" aria-labelledby="modalTitle">
            <div class="modal-head">
                <div class="modal-meta">
                    <img src="" alt="" class="avatar" id="modalAvatar">
                    <div>
                        <div id="modalTitle" class="modal-title">Message title</div>
                        <div id="modalTime" class="modal-time">time</div>
                    </div>
                </div>
                <div style="display:flex;gap:8px;align-items:center">
                    <button class="close-x" id="closeBtn" aria-label="Close">✕</button>
                </div>
            </div>

            <div id="modalBody" class="modal-body">Full message content will appear here when you open a message.</div>

            <div class="modal-actions">
                <button class="btn-ghost" id="prevBtn">← Prev</button>
                <button class="btn-ghost" id="nextBtn">Next →</button>
                <button class="btn" id="doneBtn">Done</button>
            </div>
        </div>
    </div>

    <script src="/js/common/at-start.js"></script>
    <script src="/js/common/user-admin-nav.js"></script>
    <script src="/js/users/messages.js"></script>
    <script src="/js/common/footer.js"></script>
    <script src="/js/common/at-last.js"></script>
</body>

</html>