<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="/css/common/loader.css">
    <link rel="stylesheet" href="/css/admin/admin-dashboard.css">
    <link rel="stylesheet" href="/css/admin/admin-sidebar.css">
    <link rel="stylesheet" href="/css/common/user-admin-nav.css">
    <link rel="stylesheet" href="/css/common/footer.css">
    <title>Admin - Dashboard</title>
</head>

<body>
    <div class="wrapper">
        <div class="side-nav-con"></div>
        <div class="wrap">
            <header>
                <div class="brand">
                    <div class="logo">Σ</div>
                    <div>
                        <h1>Admin Dashboard</h1>
                        <div class="subtitle">Overview: products, orders, coupons, users & revenue </div>
                    </div>
                </div>

                <div class="row">
                    <div class="muted" style="font-size:13px;margin-right:12px">Today: <strong
                            id="todayDate"><%= new Date().toISOString().slice(0, 10) %></strong>
                    </div>
                    <button class="btn ghost" onclick="refreshAll()">Refresh</button>
                    <button class="btn primary" style="margin-left:8px">Export</button>
                </div>
            </header>

            <div class="grid" id="mainGrid">
                <!-- KPI Cards -->
                <div class="kpi">
                    <div class="label">Users</div>
                    <div class="value" id="kpiUsers">—</div>
                    <div class="trend muted" id="kpiUsersTrend">Active / Registered</div>
                </div>
                <div class="kpi">
                    <div class="label">Products</div>
                    <div class="value" id="kpiProducts">—</div>
                    <div class="trend muted" id="kpiProductsTrend">Total SKUs</div>
                </div>
                <div class="kpi">
                    <div class="label">Orders</div>
                    <div class="value" id="kpiOrders">—</div>
                    <div class="trend muted" id="kpiOrdersTrend">Total PDCs</div>
                </div>
                <div class="kpi">
                    <div class="label">Revenue</div>
                    <div class="value" id="kpiRevenue">—</div>
                    <div class="trend muted" id="kpiRevenueTrend">Last 30 days</div>
                </div>

                <!-- Main Left -->
                <div class="left">
                    <div class="card">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                            <div>
                                <div class="muted" style="font-size:12px">Trend of: <strong id="userTrend">-</strong>
                                </div>
                                <div style="font-weight:700;font-size:18px">User Trend</div>
                            </div>
                            <div style="display: flex;flex-direction: column;align-items: center;">
                                <div class="muted">Total Users: <strong id="totalUserCount">—</strong></div>
                                <a class="link-btn" href="/admin/manage-users">Manage Users</a>
                            </div>
                        </div>
                        <div style="height:300px">
                            <canvas id="userChart"></canvas>
                        </div>
                    </div>

                    <div style="height:16px"></div>

                    <div class="card">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                            <div>
                                <div class="muted" style="font-size:12px">Trend of: <strong id="productTrend">last 7
                                        days</strong>
                                </div>
                                <div style="font-weight:700;font-size:16px">Trending Products</div>
                            </div>
                            <div style="display: flex;flex-direction: column;align-items: center;">
                                <div class="muted">Total products: <strong id="totalProductCount">—</strong></div>
                                <a class="link-btn" href="/admin/manage-products">Manage Products</a>
                            </div>
                        </div>
                        <div style="height:220px"><canvas id="ordersChart"></canvas></div>
                    </div>

                    <div style="height:16px"></div>

                    <!-- workingg -->
                    <div class="card">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                            <div>
                                <div class="muted" style="font-size:12px">Recent Orders</div>
                                <div style="font-weight:700;font-size:16px">Latest transactions</div>
                            </div>
                            <div style="display:flex;gap:8px;align-items:center">
                                <select id="filterStatus" onchange="renderOrdersTable()">
                                    <option value="all">All statuses</option>
                                    <option value="pending">Pending</option>
                                    <option value="processing">Processing</option>
                                    <option value="shipped">Shipped</option>
                                    <option value="delivered">Delivered</option>
                                    <option value="returned">Returned</option>
                                </select>
                                <button class="btn ghost" onclick="renderOrdersTable()">Filter</button>
                            </div>
                        </div>

                        <div style="overflow:auto;max-height:320px">
                            <table aria-label="Recent orders">
                                <thead>
                                    <tr>
                                        <th>Order</th>
                                        <th>Customer</th>
                                        <th>Amount</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="right">
                    <div class="card chartbox" style="margin-bottom:12px">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
                            <div>
                                <div class="muted" style="font-size:12px">Order</div>
                                <div style="font-weight:700">Order Breakdown</div>
                            </div>
                            <div style="display: flex;flex-direction: column;align-items: center;">
                                <div class="muted">Total orders: <strong id="totalOrderCount">—</strong></div>
                                <a href="/admin/manage-orders" class="link-btn">Manage Orders</a>
                            </div>
                        </div>
                        <div style="height:220px"><canvas id="orderChart"></canvas></div>
                    </div>

                    <div class="card" style="margin-bottom:12px">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px">
                            <div>
                                <div class="muted" style="font-size:12px">Coupons</div>
                                <div style="font-weight:700">Active coupons</div>
                            </div>
                            <div style="display: flex;flex-direction: column;align-items: center;">
                                <div class="muted">Total coupons: <strong id="totalCouponCount">—</strong></div>
                                <a href="/admin/manage-coupons" class="link-btn">Manage Coupons</a>
                            </div>
                        </div>

                        <div id="couponList" style="display:flex;flex-direction:column;gap:8px"></div>
                    </div>

                    <!-- workingg -->
                    <div class="card">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                            <div>
                                <div class="muted" style="font-size:12px">Top products</div>
                                <div style="font-weight:700">Best sellers</div>
                            </div>
                            <div class="muted">By sales</div>
                        </div>

                        <div id="topProducts">
                        </div>
                    </div>
                </div>

                <div class="full">
                    <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:16px">
                        <div class="muted">Tip: Replace the mock data in the script with real API calls. See comments in the JS.</div>
                        <div class="muted">Last refresh: <span id="lastRef"><%= new Date().toLocaleString() %></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/common/at-start.js"></script>
    <script src="/js/common/user-admin-nav.js"></script>
    <script src="/js/admin/admin-dashboard.js"></script>
    <script src="/js/common/footer.js"></script>
    <script src="/js/common/at-last.js"></script>
</body>

</html>